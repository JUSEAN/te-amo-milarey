<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Feliz Cumpleaños Mi Princesita</title>
  <link rel="stylesheet" href="CSS/style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap" rel="stylesheet"/>
</head>
<body>
  <!-- Emojis decorativos flotantes -->
  <div class="background-decor">🎀</div>
  <div class="background-decor">💖</div>
  <div class="background-decor">✨</div>
  <div class="background-decor">🌸</div>
  <div class="background-decor">💝</div>
  <div class="background-decor">🌷</div>
  <div class="background-decor">💕</div>

  <!-- Contenedor principal -->
  <div class="d1">
    <h1>LLEGASTE AL FINAL</h1>
    <p id="mensaje"></p>
  </div>

  <!-- Contenedor de corazones flotantes -->
  <div id="hearts-container"></div>

  <!-- Reproductor de música de fondo -->
  <audio id="musicaFondo" autoplay loop>
    <source src="MUSIC/song6.mp3" type="audio/mpeg">
    Tu navegador no soporta la reproducción de audio.
  </audio>

  <script src="JS/final.js"></script>

  <script>
    // Manejo de música en esta página
    (function() {
      const audio = document.getElementById("musicaFondo");
      let iniciado = false;
  
      // Detener si ya se está reproduciendo por error
      if (!audio.paused) {
        audio.pause();
        audio.currentTime = 0;
      }
  
      audio.volume = 0.6;
  
      const iniciarMusica = () => {
        if (!iniciado) {
          audio.play().catch(err => {
            console.warn("Error al iniciar música:", err);
          });
          iniciado = true;
        }
      };
  
      document.addEventListener("click", iniciarMusica, { once: true });
      document.addEventListener("touchstart", iniciarMusica, { once: true });
  
      // ✅ Al salir de la página: PAUSAR y REINICIAR el audio
      window.addEventListener("pagehide", () => {
        if (!audio.paused) {
          audio.pause();
          audio.currentTime = 0;
        }
      });
  
      window.addEventListener("beforeunload", () => {
        if (!audio.paused) {
          audio.pause();
          audio.currentTime = 0;
        }
      });
    })();
  </script>
</body>
</html>
